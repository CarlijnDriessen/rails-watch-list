<h1><%= @list.name %></h1>



<div class="bookmarks-container my-5">
  <div class="movies-container d-flex">
    <div class="cards w-75 mr-3">
      <% if @list.bookmarks.count > 0 %>
        <% @list.bookmarks.each do |bookmark| %>
        <div class="bookmark-card">
          <img src="<%= bookmark.movie.poster_url %>" alt="<%= bookmark.movie.title %> title">
          <div class="bookmark-card-details d-flex flex-column justify-content-between">

            <div>
              <div class="d-flex align-items-center">
                <h6><strong><%= bookmark.movie.title %></strong></h6>
                <h6 class="text-secondary">&nbsp;â€¢ <%= bookmark.movie.rating %></h6>
                <h6>&nbsp;<i class="fa-solid fa-star" style="color: #FFD43B;"></i></h6>
              </div>
              <p class="text-secondary"><%= bookmark.movie.overview %></p>
            </div>
            <div class="bookmark-card-comment">
              <div class="d-flex justify-content-between">
                <div class="d-flex">
                  <i class="fa-solid fa-quote-left"></i>
                  <p>&nbsp;<%= bookmark.comment %></p>
                </div>
                <div>
                  <%= link_to bookmark_path(bookmark),
                  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} do %>
                    <i class="fa-regular fa-trash-can"></i>
                  <% end %>
                </div>
              </div>
            </div>

          </div>
        </div>
        <% end %>
      <% else %>
        <%= "There are no movies in this list yet!" %>
      <% end %>
    </div>
    <div class="movie-form d-flex flex-column justify-content-top mx-auto w-25 p-2">
      <h4>Add a movie</h4>
      <%= simple_form_for [@list, @bookmark] do |f| %>
        <%= f.association :movie, prompt: "Choose a Movie" %>
        <%= f.input :comment %>
        <%= f.submit class:"btn btn-primary" %>
      <% end %>
    </div>
  </div>

  <div class="border-bottom my-5"></div>

  <div class="review-container d-flex justify-content-between">
    <div class="existing-reviews-container w-50 mr-3">
      <h2>Reviews</h2>
      <% if @list.reviews.count > 0 %>
        <% @list.reviews.each do |review| %>
          <p><%= review.rating %></p>
          <em><%= time_ago_in_words(review.created_at) %> ago</em>
          <p><%= review.comment %></p>
          <%# <%= link_to "Delete", review_path(review),
          data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
          <div class="border-bottom my-2 w-100"></div>
        <% end %>
        <% else %>
          <%= "There are no reviews for this list yet!" %>
      <% end %>
    </div>
    <div class="review-form d-flex flex-column mt-5 w-50 p-2">
      <h4>Add your review</h4>
      <%= simple_form_for [@list, @review] do |f| %>
        <%= f.input :comment %>
        <%= f.input :rating %>
        <%= f.submit class:"btn btn-primary" %>
      <% end %>
    </div>
  </div>
</div>
